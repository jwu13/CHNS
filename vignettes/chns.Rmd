---
title: "CHNS"
author: "Betty Pu, and Junru Wu"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{CHNS}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  warnings = FALSE,
  errors = FALSE
)
```

```{r setup, include=FALSE}
library(chns)
library(dplyr)
library(haven)
library(leafletCN)
```

The `CHNS` package contains data on Chinese Health and Nutrition Survey with 10 years of survey data over the period of 1989 to 2015.

## Inspiration 
We wanted to create a package that helps researchers explore China Health and Nutrition Survey (CHNS) with just a basic R understanding. The package `CHNS` allows easy access to a wide variety of information regarding effects of the health, nutrition, and family planning policies on the health and nutritional status of its population. CHNS data has both inconsistencies in variable units and ways of recording N/A values, as well as general inconvenience caused by panel data. This package aims to provide a clearer and more efficient way of exploring CHNS Data.

## Datasets Included
All the datasets are taken from [CHNS] (https://www.cpc.unc.edu/projects/china/data)

-   `emw_12_clean`: dataset of number of child births and number of child deaths for women included in the survey; negative and N/A values are recorded as 0 in the dataset.
-   `indinc_10_clean`: dataset of individual wage of the observations included in the survey, all negative wage are recorded as zero.
-   `map_dat_clean`: dataset of average annual income by province for the 10 years included in the survey; wage_mean is in unit of RMB, wage_mean_k is in unit of 1000 RMB, and wage_mean_cat are manually constructed categories for mapping.

## Who should use this package?

This package can be used by researchers and students who are interested in using data from China Health and Nutrition Survey (CHNS). Additionally, anyone who’s interested in using CHNS data and wish to simplify the data cleaning process are welcomed to use this package as a data cleaning aid tool.

## What does the data look like?

Here's the first 5 rows of the `indinc_10_clean` dataset

```{r}
head (indinc_10_clean)
```

## What can we do with this package?

We can use this package to analyze and visualize CHNS data. 

We can use these functions  as a preliminary data preparing tool to answer research questions regarding China’s social-economic conditions such as:

Below are some examples of the existing functionality the package provides, including data wrangling and data visualization techniques.

## Example 1: Get Real Income with selected base year.

This is a basic example for `real_income()` that returns a tibble with income weighted over inflation for the selected base year.

`real_income(base_year)`: This function calculates the deflated/inflated real income based on the selected survey year. 

```{r}
real_income(base_year=1989) 
```

## Example 2: Get Number of Children a women has up to an inputted year.

`num_of_children(base_year)`: This function returns the number of children a woman had up to an inputted year. 

```{r}
num_of_children(year = 2006) 
```

Here is the function for data visualization: `map_income()`

## Example 3: Get a map with province mean income by an input year

`map_income(year)`: This function would potentially map the population density by province on the map for the selected year.
```{r}
map_income(year = 2006) 
```



